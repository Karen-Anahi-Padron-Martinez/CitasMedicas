<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario estudiantes</title>
  <link rel="stylesheet" href="principal-page.component.css">
</head>

<body>
  <header>
    <h1>Psicocitas</h1>
    <button mat-button [routerLink]="['/auth/login']" color="primary" class="btn">Login</button>
  </header>

  <div class="main-content">
    <div class="form-content">
      <h2>Completa los campos</h2>
      <form [formGroup]="studentForm" (ngSubmit)="onSubmit()">
        <label for="nombre">Nombre Completo:</label>
        <input type="text" id="nombre" formControlName="nombre" required>
        <div *ngIf="studentForm.get('nombre')?.invalid && studentForm.get('nombre')?.touched">
          <span *ngIf="studentForm.get('nombre')?.hasError('required')">El nombre es obligatorio.</span>
        </div>

        <label for="area">Área académica:</label>
        <select id="area" formControlName="area" required>
          <option value="Administración Capital Humano">Administración Capital Humano</option>
          <option value="Mercadotecnia">Mercadotecnia</option>
          <option value="Contaduría">Contaduría</option>
          <option value="Turismo">Turismo</option>
          <option value="Desarrollo de Software">Desarrollo de Software</option>
          <option value="Redes Digitales">Redes Digitales</option>
          <option value="Entornos Virtuales">Entornos Virtuales</option>
          <option value="Diseño Digital">Diseño Digital</option>
          <option value="Mecatronica">Mecatrónica</option>
          <option value="Procesos Industriales">Procesos Industriales</option>
          <option value="Energías Renovables">Energías Renovables</option>
        </select>
        <div *ngIf="studentForm.get('area')?.invalid && studentForm.get('area')?.touched">
          <span *ngIf="studentForm.get('area')?.hasError('required')">El área académica es obligatoria.</span>
        </div>

        <label for="grupo">Grupo:</label>
        <input type="text" id="grupo" formControlName="grupo" required>
        <div *ngIf="studentForm.get('grupo')?.invalid && studentForm.get('grupo')?.touched">
          <span *ngIf="studentForm.get('grupo')?.hasError('required')">El grupo es obligatorio.</span>
        </div>

        <mat-form-field appearance="outline">
          <mat-label>Email</mat-label>
          <input matInput type="email" formControlName="email" required>
          <mat-error *ngIf="studentForm.get('email')?.invalid && studentForm.get('email')?.touched">
            <span *ngIf="studentForm.get('email')?.hasError('required')">El email es obligatorio.</span>
            <span *ngIf="studentForm.get('email')?.hasError('email')">Debe ser un email válido.</span>
          </mat-error>
        </mat-form-field>

        <label for="numero">Número de control:</label>
        <input type="number" id="numero" formControlName="numero" required>
        <div *ngIf="studentForm.get('numero')?.invalid && studentForm.get('numero')?.touched">
          <span *ngIf="studentForm.get('numero')?.hasError('required')">El número de control es obligatorio.</span>
        </div>

        

        <button class="btn" type="submit" [disabled]="studentForm.invalid">Enviar</button>
        <button class="btn" type="reset" (click)="resetForm()">Limpiar</button>
      </form>
    </div>

    <div class="calendar-content">
      <mat-calendar [(selected)]="selectedDate"></mat-calendar>
      <p class="calendar-text">Si quieres agendar una cita rellena el formulario y da click en "Enviar", el apartado login es exclusivo para el departamento psicopedagógico.</p>
    </div>

    <div class="student-list">
      <h2>Lista de Estudiantes</h2>
      <table>
        <thead>
          <tr>
            <th>IdUsuario</th>
            <th>Nombre</th>
            <th>Área Académica</th>
            <th>Grupo</th>
            <th>Correo</th>
            <th>Número de Control</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let estudiante of estudiantes">
            <td>{{ estudiante.IdUsuario }}</td>
            <td>{{ estudiante.Nombre }}</td>
            <td>{{ estudiante.AreaAcademica }}</td>
            <td>{{ estudiante.Grupo }}</td>
            <td>{{ estudiante.EmailA }}</td>
            <td>{{ estudiante.NumControl }}</td>
            <td><a [routerLink]="['/auth/hacercita', estudiante.IdUsuario]">haz tu cita</a></td>
            <td>
              <button (click)="onEdit(estudiante.IdUsuario)">Modificar</button>
              <button (click)="onDelete(estudiante.IdUsuario)">Eliminar</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <footer>
    <table style="margin: 0 auto; text-align: center; width: 100%;">
      <tr>
        <td><mat-icon>email</mat-icon></td>
        <td><span>Ana.guerrero{{ '@' }}utng.edu.mx</span></td>
        <td><mat-icon>email</mat-icon></td>
        <td><span>Azucena.hernandez{{ '@' }}utng.edu.mx</span></td>
      </tr>
      <tr>
        <td><mat-icon>email</mat-icon></td>
        <td><span>Tania.mendiola{{ '@' }}utng.edu.mx</span></td>
        <td><mat-icon>person_alert</mat-icon></td>
        <td><span>Pronto se agregarán más contactos</span></td>
      </tr>
      <tr>
        <td colspan="3"></td>
        <td class="date" style="text-align: right;">{{ currentDate }}</td>
      </tr>
    </table>
  </footer>
</body>

</html>
